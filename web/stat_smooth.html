<html>

<head>
	<title>stat_smooth. had.co.nz</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
	<link rel="stylesheet" type="text/css" href="doc.css">
</head>

<body>
<?php include($_SERVER["DOCUMENT_ROOT"] . "header.html"); ?>

<div id="wrap">
<img src='stat_smooth.png' width='50' height='50' alt='' align='right' class='icon' />
<h1>stat_smooth</h1>
<p class='desc'>Add a smoother</p>
<h2>Details</h2>
<div class='details'>
Aids the eye in seeing patterns in the presence of overplotting.<p>See <a href='layer.html'>layer</a> and <a href='qplot.html'>qplot</a> for more information on creating a complete plot from multiple components.</p>
</div>
<h2>New variables produced by the statistic</h2>
<p>To use these variables in an aesthetic mapping, you need to surrond them with .., like <code>aes(x = ..output..)</code>.</p>
<ul>
<li><code>y</code>, predicted value</li>
<li><code>min</code>, lower pointwise confidence interval around the mean</li>
<li><code>max</code>, upper pointwise confidence interval around the mean</li>
<li><code>se</code>, standard error</li>
</ul>
<h2>Parameters</h2>
<p>When an aesthetic is used an a parameter, like <code>stat_smooth(method = 3)</code>, it will override mappings from data.</p>
<ul>
<li><code>method</code>, smoothing method (function) to use, eg. lm, glm, gam, loess, rlm</li>
<li><code>formula</code>, formula to use in smoothing function, eg. y ~ x, y ~ poly(x, 2), y ~ log(x)</li>
<li><code>se</code>, display one standard error on either side of fit? (true by default)</li>
<li><code>n</code>, number of points to evaluate smoother at</li>
<li><code>fullrange</code>, should the fit span the full range of the plot, or just the data</li>
<li><code>xseq</code>, exact points to evaluate smooth at, overrides n</li>
<li><code>level</code>, level of confidence interval to use</li>
</ul>
<h2>Default geom</h2>
<p><a href='geom_smooth.html' title='Add a smoothed condition mean.'>geom_smooth</a>.  Override with the  <code>geom</code> argument: <code>stat_smooth(geom="point")</code>.</p>
<h2>Examples</h2><pre>

&gt; c <span class="sym">&lt;-</span> <a href='ggplot.html'>ggplot</a><span class="sym">(</span>mtcars<span class="sym">,</span> <a href='aes.html'>aes</a><span class="sym">(</span>y<span class="sym">=</span>wt<span class="sym">,</span> x<span class="sym">=</span>qsec<span class="sym">))</span>
&gt; c <span class="sym">+</span> stat_smooth<span class="sym">()</span>
<img src='graphics/ca84c90671872023016b7ca0d660d8db.png' />

&gt; c <span class="sym">+</span> stat_smooth<span class="sym">() +</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">()</span>
<img src='graphics/21d0dc6db48d491b2fc4d741a27783e6.png' />

&gt; 
&gt; <span class="slc"># Adjust parameters</span>
&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>se <span class="sym">=</span> FALSE<span class="sym">) +</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">()</span>
<img src='graphics/c4e151b1dc0767fc7b03837f16ab1c99.png' />

&gt; 
&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>span <span class="sym">=</span> <span class="num">0.9</span><span class="sym">) +</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">()</span>
<img src='graphics/06b64ab55785adc8bbea4b6a2ee277b2.png' />

&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>method <span class="sym">=</span> <span class="str">&quot;lm&quot;</span><span class="sym">) +</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">()</span>
<img src='graphics/be6981a27da1a91a9363103156184b92.png' />

&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>method <span class="sym">=</span> lm<span class="sym">,</span> formula<span class="sym">=</span> y ~ ns<span class="sym">(</span>x<span class="sym">,</span><span class="num">3</span><span class="sym">)) +</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">()</span>
<img src='graphics/fb5a973234eaa22ef711c78435bbe55a.png' />

&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>method <span class="sym">=</span> rlm<span class="sym">,</span> formula<span class="sym">=</span> y ~ ns<span class="sym">(</span>x<span class="sym">,</span><span class="num">3</span><span class="sym">)) +</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">()</span>
<img src='graphics/dca3cd683a8f15957aef659af5d8db0e.png' />

&gt; 
&gt; <span class="slc"># Add aesthetic mappings</span>
&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>fill<span class="sym">=</span><span class="str">&quot;blue&quot;</span><span class="sym">,</span> colour<span class="sym">=</span><span class="str">&quot;darkblue&quot;</span><span class="sym">,</span> size<span class="sym">=</span><span class="num">2</span><span class="sym">)</span>
<img src='graphics/dc82f7381d51a8ca02735b1c3a7e2335.png' />

&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>fill<span class="sym">=</span>alpha<span class="sym">(</span><span class="str">&quot;blue&quot;</span><span class="sym">,</span> <span class="num">0.2</span><span class="sym">),</span> colour<span class="sym">=</span><span class="str">&quot;darkblue&quot;</span><span class="sym">,</span> size<span class="sym">=</span><span class="num">2</span><span class="sym">)</span>
<img src='graphics/cc5211ca8c64ace6aa4de2f4de824d7a.png' />

&gt; c <span class="sym">+</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">() +</span> stat_smooth<span class="sym">(</span>fill<span class="sym">=</span>alpha<span class="sym">(</span><span class="str">&quot;blue&quot;</span><span class="sym">,</span> <span class="num">0.2</span><span class="sym">),</span> colour<span class="sym">=</span><span class="str">&quot;darkblue&quot;</span><span class="sym">,</span> size<span class="sym">=</span><span class="num">2</span><span class="sym">)</span>
<img src='graphics/e9e731eddac89bffb49e9d96cb7eadce.png' />

&gt; 
&gt; <span class="slc"># Smoothers for subsets</span>
&gt; c <span class="sym">&lt;-</span> <a href='ggplot.html'>ggplot</a><span class="sym">(</span>mtcars<span class="sym">,</span> <a href='aes.html'>aes</a><span class="sym">(</span>y<span class="sym">=</span>wt<span class="sym">,</span> x<span class="sym">=</span>mpg<span class="sym">),</span> . ~ cyl<span class="sym">)</span>
&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>method<span class="sym">=</span>lm<span class="sym">) +</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">()</span>
<img src='graphics/ef7f5eb20bfe7248c66544263b73bd65.png' />

&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>method<span class="sym">=</span>lm<span class="sym">,</span> fullrange<span class="sym">=</span>T<span class="sym">) +</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">()</span>
<img src='graphics/094b82f39e3f4f6a66d62d443170f287.png' />

&gt; 
&gt; <span class="slc"># Geoms and stats are automatically split by aesthetics that are factors</span>
&gt; c <span class="sym">&lt;-</span> <a href='ggplot.html'>ggplot</a><span class="sym">(</span>mtcars<span class="sym">,</span> <a href='aes.html'>aes</a><span class="sym">(</span>y<span class="sym">=</span>wt<span class="sym">,</span> x<span class="sym">=</span>mpg<span class="sym">,</span> colour<span class="sym">=</span>factor<span class="sym">(</span>cyl<span class="sym">)))</span>
&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>method<span class="sym">=</span>lm<span class="sym">) +</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">()</span>
<img src='graphics/24ba757077f3871b0145073bee03f75d.png' />

&gt; c <span class="sym">+</span> stat_smooth<span class="sym">(</span>method<span class="sym">=</span>lm<span class="sym">,</span> fullrange<span class="sym">=</span>TRUE<span class="sym">,</span> fill<span class="sym">=</span>alpha<span class="sym">(</span><span class="str">&quot;black&quot;</span><span class="sym">,</span> <span class="num">0.1</span><span class="sym">)) +</span> <a href='geom_point.html' title='Points, as for a scatterplot'>geom_point</a><span class="sym">()</span>
<img src='graphics/d13bcbc0cc279615e69613ec08fb96b0.png' />

&gt; 
&gt; <span class="slc"># Use <a href='qplot.html'>qplot</a> instead</span>
&gt; <a href='qplot.html'>qplot</a><span class="sym">(</span>qsec<span class="sym">,</span> wt<span class="sym">,</span> data<span class="sym">=</span>mtcars<span class="sym">,</span> <a href='geom_.html'>geom</a><span class="sym">=</span>c<span class="sym">(</span><span class="str">&quot;smooth&quot;</span><span class="sym">,</span> <span class="str">&quot;point&quot;</span><span class="sym">))</span>
<img src='graphics/c0faabd7d15e27a8e45a9978797f7659.png' />
</pre></div>

<?php include($_SERVER["DOCUMENT_ROOT"] . "footer.html"); ?>
</body>
</html>
